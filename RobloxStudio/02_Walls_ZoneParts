-- ADD WALLS - Command Bar Script
-- Paste this into Roblox Studio Command Bar
-- This script adds walls to your map with various options

print("=== Add Walls Script ===")

-- Delete all existing walls and roof in the Walls folder before creating new ones
local wallsFolder = workspace:FindFirstChild("Walls")
if wallsFolder then
	print("ðŸ—‘ï¸ Deleting existing walls and roof...")
	local deletedCount = 0
	for _, child in ipairs(wallsFolder:GetChildren()) do
		child:Destroy()
		deletedCount = deletedCount + 1
	end
	print("  âœ“ Deleted " .. deletedCount .. " existing object(s) (walls and roof)")
else
	print("  âœ“ No existing Walls folder found")
end

print("\nChoose an option:")
print("1. Add perimeter walls around the map")
print("2. Add walls at specific positions")
print("3. Add walls between zones")
print("4. Add custom walls")

-- Configuration
local wallHeight = 150 -- Height of walls in studs (3x higher than before)
local wallThickness = 2 -- Thickness of walls in studs
local wallMaterial = Enum.Material.Brick
local wallColor = BrickColor.new("Dark stone grey")
local wallAnchored = true
local wallCanCollide = true

-- Function to create a single wall
local function createWall(position, size, name)
	local wall = Instance.new("Part")
	wall.Name = name or "Wall"
	wall.Size = size
	wall.Position = position
	wall.Anchored = wallAnchored
	wall.CanCollide = wallCanCollide
	wall.Material = wallMaterial
	wall.BrickColor = wallColor
	wall.CastShadow = true -- Walls cast shadows
	wall.Parent = workspace
	
	-- Create a folder for walls if it doesn't exist
	local wallsFolder = workspace:FindFirstChild("Walls")
	if not wallsFolder then
		wallsFolder = Instance.new("Folder")
		wallsFolder.Name = "Walls"
		wallsFolder.Parent = workspace
	end
	wall.Parent = wallsFolder
	
	return wall
end

-- Function to create a glass roof
local function createRoof(baseplateSize, baseplatePos, roofHeight)
	print("\nðŸ  Adding glass roof...")
	
	local roofThickness = 1 -- Thin roof
	local roofY = baseplatePos.Y + roofHeight + (roofThickness / 2)
	
	local roof = Instance.new("Part")
	roof.Name = "Roof"
	roof.Size = Vector3.new(baseplateSize.X, roofThickness, baseplateSize.Z)
	roof.Position = Vector3.new(baseplatePos.X, roofY, baseplatePos.Z)
	roof.Anchored = true
	roof.CanCollide = true
	roof.Material = Enum.Material.Glass -- Glass material for light
	roof.BrickColor = BrickColor.new("Light blue") -- Light blue tint for glass
	roof.Transparency = 0.3 -- Slightly transparent
	roof.CastShadow = false -- Roof doesn't cast shadows either
	
	-- Get or create Walls folder
	local wallsFolder = workspace:FindFirstChild("Walls")
	if not wallsFolder then
		wallsFolder = Instance.new("Folder")
		wallsFolder.Name = "Walls"
		wallsFolder.Parent = workspace
	end
	roof.Parent = wallsFolder
	
	print("  âœ“ Glass roof created at height: " .. roofY)
	return roof
end

-- Option 1: Add perimeter walls around the map
local function addPerimeterWalls()
	print("\nðŸ“ Adding perimeter walls...")
	
	-- Find Baseplate to determine map bounds (try multiple name variations)
	local baseplate = workspace:FindFirstChild("Baseplate")
	if not baseplate then
		baseplate = workspace:FindFirstChild("baseplate")
	end
	if not baseplate then
		baseplate = workspace:FindFirstChild("BasePlate")
	end
	if not baseplate then
		-- Search recursively in workspace for Baseplate
		local function findBaseplateRecursive(parent)
			for _, obj in ipairs(parent:GetChildren()) do
				if obj:IsA("Part") and (obj.Name:lower():find("baseplate") or obj.Name:lower():find("base plate")) then
					return obj
				end
				if obj:IsA("Model") or obj:IsA("Folder") then
					local found = findBaseplateRecursive(obj)
					if found then return found end
				end
			end
			return nil
		end
		baseplate = findBaseplateRecursive(workspace)
	end
	
	if not baseplate then
		warn("âš  No Baseplate found! Searching workspace for all parts...")
		-- List all parts in workspace for debugging
		print("  Parts in workspace:")
		local partCount = 0
		for _, obj in ipairs(workspace:GetChildren()) do
			if obj:IsA("Part") then
				partCount = partCount + 1
				print("    - " .. obj.Name .. " | Size: " .. tostring(obj.Size) .. " | Position: " .. tostring(obj.Position))
			end
		end
		if partCount == 0 then
			print("    (No parts found directly in workspace - they may be in Models/Folders)")
		end
		warn("âš  Please create a part named 'Baseplate' or manually specify bounds")
		return
	end
	
	-- Verify it's actually named Baseplate (not just a large part)
	if not (baseplate.Name:lower():find("baseplate") or baseplate.Name:lower():find("base plate")) then
		warn("âš  Found part '" .. baseplate.Name .. "' but it's not named 'Baseplate'")
		warn("âš  Using it anyway, but make sure this is correct!")
	end
	
	print("  âœ“ Found baseplate: " .. baseplate.Name)
	print("    Size: " .. tostring(baseplate.Size))
	print("    Position: " .. tostring(baseplate.Position))
	
	local baseplateSize = baseplate.Size
	local baseplatePos = baseplate.Position
	local halfSizeX = baseplateSize.X / 2
	local halfSizeZ = baseplateSize.Z / 2
	local wallY = baseplatePos.Y + (wallHeight / 2)
	
	-- Terrain margin (matches terrain generation - terrain is inset 8 studs from baseplate edges)
	local TERRAIN_MARGIN = 8
	
	-- Calculate terrain boundaries (where terrain ends)
	local terrainMinX = baseplatePos.X - halfSizeX + TERRAIN_MARGIN
	local terrainMaxX = baseplatePos.X + halfSizeX - TERRAIN_MARGIN
	local terrainMinZ = baseplatePos.Z - halfSizeZ + TERRAIN_MARGIN
	local terrainMaxZ = baseplatePos.Z + halfSizeZ - TERRAIN_MARGIN
	
	-- North wall (positive Z) - positioned at terrain edge, extends to baseplate edge
	local northWallX = baseplatePos.X
	local northWallZ = terrainMaxZ + (wallThickness / 2) -- At terrain edge, slightly outward
	local northWallWidth = baseplateSize.X + (wallThickness * 2) -- Spans full baseplate width
	createWall(
		Vector3.new(northWallX, wallY, northWallZ),
		Vector3.new(northWallWidth, wallHeight, wallThickness),
		"NorthWall"
	)
	
	-- South wall (negative Z) - positioned at terrain edge, extends to baseplate edge
	local southWallX = baseplatePos.X
	local southWallZ = terrainMinZ - (wallThickness / 2) -- At terrain edge, slightly outward
	local southWallWidth = baseplateSize.X + (wallThickness * 2) -- Spans full baseplate width
	createWall(
		Vector3.new(southWallX, wallY, southWallZ),
		Vector3.new(southWallWidth, wallHeight, wallThickness),
		"SouthWall"
	)
	
	-- East wall (positive X - blue team side) - positioned at terrain edge, extends to baseplate edge
	local eastWallX = terrainMaxX + (wallThickness / 2) -- At terrain edge, slightly outward
	local eastWallZ = baseplatePos.Z
	local eastWallDepth = baseplateSize.Z -- Spans full baseplate depth
	createWall(
		Vector3.new(eastWallX, wallY, eastWallZ),
		Vector3.new(wallThickness, wallHeight, eastWallDepth),
		"EastWall"
	)
	
	-- West wall (negative X - red team side) - positioned at terrain edge, extends to baseplate edge
	local westWallX = terrainMinX - (wallThickness / 2) -- At terrain edge, slightly outward
	local westWallZ = baseplatePos.Z
	local westWallDepth = baseplateSize.Z -- Spans full baseplate depth
	createWall(
		Vector3.new(westWallX, wallY, westWallZ),
		Vector3.new(wallThickness, wallHeight, westWallDepth),
		"WestWall"
	)
	
	-- Add glass roof
	createRoof(baseplateSize, baseplatePos, wallHeight)
	
	print("âœ“ Perimeter walls and roof added!")
end

-- Option 2: Add walls at specific positions
local function addWallsAtPositions()
	print("\nðŸ“ Adding walls at specific positions...")
	
	-- Example positions (you can modify these)
	local wallPositions = {
		{pos = Vector3.new(0, 25, 0), size = Vector3.new(10, wallHeight, wallThickness), name = "Wall1"},
		{pos = Vector3.new(50, 25, 0), size = Vector3.new(10, wallHeight, wallThickness), name = "Wall2"},
		{pos = Vector3.new(100, 25, 0), size = Vector3.new(10, wallHeight, wallThickness), name = "Wall3"},
	}
	
	for i, wallData in ipairs(wallPositions) do
		createWall(wallData.pos, wallData.size, wallData.name)
		print("  âœ“ Created " .. wallData.name)
	end
	
	print("âœ“ Custom walls added!")
	print("ðŸ’¡ Modify wallPositions in the script to add more walls")
end

-- Option 3: Add walls between zones (based on GameMap.txt)
local function addWallsBetweenZones()
	print("\nðŸ—ºï¸ Adding walls between zones...")
	
	-- Zone boundaries (approximate - adjust based on your actual map)
	-- These are example positions - you'll need to adjust to match your map
	local zoneWalls = {
		-- Wall between Red Base and Zone 1
		{pos = Vector3.new(-100, 25, -40), size = Vector3.new(wallThickness, wallHeight, 50), name = "RedBase_Wall"},
		-- Wall between Blue Base and Zone 5
		{pos = Vector3.new(900, 25, 200), size = Vector3.new(wallThickness, wallHeight, 50), name = "BlueBase_Wall"},
		-- Wall in middle area
		{pos = Vector3.new(400, 25, 100), size = Vector3.new(100, wallHeight, wallThickness), name = "Middle_Wall"},
	}
	
	for i, wallData in ipairs(zoneWalls) do
		createWall(wallData.pos, wallData.size, wallData.name)
		print("  âœ“ Created " .. wallData.name)
	end
	
	print("âœ“ Zone walls added!")
	print("ðŸ’¡ Adjust positions in zoneWalls to match your actual map layout")
end

-- Option 4: Add custom walls with user input
local function addCustomWall()
	print("\nðŸŽ¨ Adding custom wall...")
	print("Using default settings:")
	print("  Position: (0, 25, 0)")
	print("  Size: (20, " .. wallHeight .. ", " .. wallThickness .. ")")
	
	local wall = createWall(
		Vector3.new(0, 25, 0),
		Vector3.new(20, wallHeight, wallThickness),
		"CustomWall"
	)
	
	print("âœ“ Custom wall created!")
	print("ðŸ’¡ Modify the script to change position, size, or properties")
end

-- Main execution - choose which option to run
-- Change this number to run different options:
local option = 1 -- Change to 1, 2, 3, or 4

if option == 1 then
	addPerimeterWalls()
elseif option == 2 then
	addWallsAtPositions()
elseif option == 3 then
	addWallsBetweenZones()
elseif option == 4 then
	addCustomWall()
else
	warn("Invalid option! Choose 1, 2, 3, or 4")
end

print("\nâœ… Wall creation complete!")
print("ðŸ’¡ All walls and roof are in workspace > Walls folder")
print("ðŸ’¡ Walls cast shadows, and roof is made of glass for natural light")
print("ðŸ’¡ To modify walls, change the 'option' variable at the bottom of the script")

